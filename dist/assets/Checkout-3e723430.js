import{u as x,r as c,C as j,j as e,M as b,c as p}from"./index-c8eedec3.js";function f({onSubmit:l}){const s=x(),i=c.useContext(j),[o,a]=c.useState(!1),d=n=>{n.preventDefault();const r=new FormData(n.target),t=Object.fromEntries(r.entries());l(t),a(!0),m(t),n.target.reset()},u=()=>{a(!1),i.clearCart(),s("/")};async function m(n){const r=await fetch("https://food-ordering-website-backend-3mwk.onrender.com/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({order:{items:i.cartItems,customer:n}})}),t=await r.json();if(!r.ok)throw new Error("Something went wrong!");return t.message}return e.jsxs(e.Fragment,{children:[e.jsxs("form",{onSubmit:d,id:"shipping-form",children:[e.jsxs("div",{className:"input-field",children:[e.jsx("label",{htmlFor:"name",children:"Name:"}),e.jsx("input",{type:"text",id:"name",name:"name",required:!0})]}),e.jsxs("div",{className:"input-field",children:[e.jsx("label",{htmlFor:"email",children:"Email:"}),e.jsx("input",{type:"email",id:"email",name:"email",required:!0})]}),e.jsxs("div",{className:"input-field",children:[e.jsx("label",{htmlFor:"address",children:"Address:"}),e.jsx("input",{type:"text",id:"address",name:"address",required:!0})]}),e.jsxs("div",{className:"input-field",children:[e.jsx("label",{htmlFor:"city",children:"City:"}),e.jsx("input",{type:"text",id:"city",name:"city",required:!0})]}),e.jsxs("div",{className:"input-field",children:[e.jsx("label",{htmlFor:"postalCode",children:"Postal Code:"}),e.jsx("input",{type:"text",id:"postalCode",name:"postalCode",required:!0})]}),e.jsxs("div",{className:"input-field",children:[e.jsx("label",{htmlFor:"country",children:"Country:"}),e.jsx("input",{type:"text",id:"country",name:"country",required:!0})]}),e.jsxs("div",{className:"btn-group",children:[e.jsx("button",{type:"reset",className:"cart-button",children:"Reset"}),e.jsx("button",{type:"submit",className:"cart-button",children:"Submit"})]})]}),o&&e.jsx(b,{onClose:u,openStatus:o,children:e.jsx("p",{children:"Submitted Successfully!"})})]})}function y(){const l=x(),s=c.useContext(j),i=s.cartItems.reduce((t,h)=>t+h.price*h.quantity,0),[o,a]=c.useState(!1),d=t=>{s.removeItem(t)},u=t=>{s.reduceQuantity(t)},m=t=>{s.increaseQuantity(t)},n=t=>{console.log("Form Data:",t)},r=()=>{l("/")};return e.jsx("div",{id:"Checkout-page",children:o?e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:"Your Shipping information"}),e.jsx(f,{onSubmit:n}),e.jsx("button",{onClick:()=>a(!1),className:"cart-button btn-back",children:"Back to: Shopping cart"})]}):e.jsxs("div",{children:[e.jsx("h2",{children:"Your Shopping cart"}),s.cartItems.length>0?e.jsxs(e.Fragment,{children:[e.jsx("ul",{children:s.cartItems.map(t=>e.jsxs("li",{className:"cart-item",children:[e.jsx("img",{src:`https://food-ordering-website-backend-3mwk.onrender.com/${t.image}`,alt:t.name}),e.jsx("span",{children:t.name}),e.jsx("button",{onClick:()=>u(t.id),className:"cart-button",children:" - "}),e.jsx("span",{children:t.quantity}),e.jsx("button",{onClick:()=>m(t.id),className:"cart-button",children:" + "}),e.jsx("span",{children:p.format(t.price)}),e.jsx("button",{onClick:()=>d(t.id),className:"cart-button",children:"Remove Item"})]},t.id))}),e.jsxs("p",{children:["Total: ",e.jsx("strong",{children:p.format(i)})]}),e.jsx("button",{onClick:()=>a(!0),className:"cart-button",children:"Next: Shipping Information"})]}):e.jsx("p",{children:"You have no items on your Cart"}),e.jsx("button",{onClick:r,className:"cart-button btn-back",children:"Back to Shopping Meals"})]})})}export{y as default};
